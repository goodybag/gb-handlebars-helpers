#!/bin/sh

if [ $# -eq 0 ]; then
    echo "usage: ./add-helper <helper> to generate /lib/helpers/<helper>, /test/<helper>"
    exit 1
fi

echo "var helpers = require('../lib/helpers');
var assert = require('assert');
var Hbs = require('handlebars');

describe('$1', function() {
  before(function() {
    helpers.register(Hbs, '$1');
  });

  it('should handle $1 block helper', function() {
    var str = '{{#$1 a b}}a{{else}}b{{/$1}}';
    var template = Hbs.compile(str);
    assert(template({ a: true, b: false}) === 'a');
  });

  it('should handle $1 fn', function() {
    assert(Hbs.helpers.$1(true, false));
  });
});" > ./test/$1.js

echo "if ( typeof module === \"object\" && module && typeof module.exports === \"object\" ){
  var isNode = true, define = function (factory) {
    module.exports = factory(require, exports, module);
  };
}

define(function(require, exports, module) {
  module.exports = function(a, b, options){
  };

  return module.exports;
});" > ./lib/helpers/$1.js
